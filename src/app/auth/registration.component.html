<app-main-nav></app-main-nav>

  <div class="container d-flex justify-content-center">
    <mat-card class="example-card">
      <mat-card-header>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link" routerLink="/login">Bejelentkezés</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" routerLink="/registration">Regisztráció</a>
          </li>
        </ul>
      </mat-card-header>
      <mat-card-content>
        <form #f="ngForm" (ngSubmit)="onRegister()" novalidate>
          <mat-form-field color="accent" appearance="fill">
            <mat-label>Felhasználónév</mat-label>
            <input
              [(ngModel)]="username"
              name="username"
              id="username"
              matInput
              #usernameError="ngModel"
              (change)="log(username)"
              minlength="5"
              maxlength="15"
              pattern="[A-Za-z0-9]+"
              required
            />
            <mat-hint align="start">Minimum 5, maximum 15 karakter.</mat-hint>
            <div
              class="alert alert-danger"
              *ngIf="usernameError.invalid && usernameError.touched"
            >
              <div *ngIf="usernameError.errors.required">
                Felhasználónév megadása kötelező!
              </div>
              <div *ngIf="usernameError.errors.minlength">
                Minimum {{ usernameError.errors.minlength.requiredLength }} karakter hosszúságú legyen!
              </div>
              <div *ngIf="usernameError.errors.pattern">
                Csak kis- és nagybetűket, illetve számokat tartalmazhat!
              </div>
            </div>
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Jelszó</mat-label>
            <input
              [(ngModel)]="password"
              type="password"
              name="password"
              id="password"
              matInput
              #passwordError="ngModel"
              (change)="log(password)"
              minlength="8"
              maxlength="30"
              pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="passwordError.invalid && passwordError.touched"
            >
              <div *ngIf="passwordError.errors.required">
                Jelszó megadása kötelező!
              </div>
              <div *ngIf="passwordError.errors.minlength">
                Minimum {{ passwordError.errors.minlength.requiredLength }} karakter hosszúságú legyen!
              </div>
              <div *ngIf="passwordError.errors.pattern">
                Tartalmazzon számokat kis és nagybetűket.
              </div>
            </div>
            <mat-hint align="start"
              >Minimum 8, maximum 30 karakter hosszú, tartalmazzon számokat kis
              és nagybetűket.</mat-hint
            >
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Teljes név</mat-label>
            <input
              [(ngModel)]="name"
              name="name"
              id="name"
              matInput
              maxlength="40"
              #nameError="ngModel"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="nameError.invalid && nameError.touched"
            >
              <div *ngIf="nameError.errors.required">
                Név megadása kötelező!
              </div>
              <div *ngIf="nameError.errors.maxlength">
                Maximum 40 karakter hosszú lehet.
              </div>
            </div>
            <mat-hint align="start">Név megadása kötelező</mat-hint>
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Email</mat-label>
            <input
              [(ngModel)]="email"
              name="email"
              id="email"
              matInput
              #emailError="ngModel"
              (change)="log(email)"
              pattern="[a-z0-9_.+-]+@[a-z0-9-]+\.[a-z0-9-]+"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="emailError.invalid && emailError.touched"
            >
              <div *ngIf="emailError.errors.required">
                Email megadása kötelező!
              </div>
              <div *ngIf="emailError.errors.pattern">
                Meg kell felelnie a mintának.
              </div>
              <div *ngIf="emailError.errors.maxlength">
                Maximum 40 karakter hosszú lehet.
              </div>
            </div>
            <mat-hint align="start">Email cím megadása kötelező</mat-hint>
          </mat-form-field>

          <mat-form-field>
            <label for="dateOfBorn">Születési dátum:</label>
            <input
              name="dateOfBorn"
              id="dateOfBorn"
              matInput
              [matDatepicker]="myDatePicker"
              [(ngModel)]="dateOfBorn"
              [min]="minDate"
              [max]="maxDate"
              required
            />
            <mat-datepicker-toggle
              [for]="myDatePicker"
              matSuffix
            ></mat-datepicker-toggle>
            <mat-datepicker #myDatePicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Lakcím</mat-label>
            <input name="address" id="address" matInput [(ngModel)]="address" required/>
            <mat-hint align="start">Lakcím megadása kötelező</mat-hint>
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Személyazonosító igazolvány szám</mat-label>
            <input
              [(ngModel)]="idCard"
              name="idCard"
              id="idCard"
              matInput
              #idCardError="ngModel"
              (change)="log(idCard)"
              pattern="[0-9]{6}[A-Z]{2}"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="idCardError.invalid && idCardError.touched"
            >
              <div *ngIf="idCardError.errors.required">
                Személyazonosító igazolvány szám megadása kötelező!
              </div>
              <div *ngIf="idCardError.errors.pattern">
                Meg kell felelnie a mintának.
              </div>
            </div>
            <mat-hint align="start"
              >Személyazonosító igazolvány szám megadása kötelező</mat-hint
            >
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>TAJ kártya szám</mat-label>
            <input
              [(ngModel)]="socSecNum"
              name="socSecNum"
              id="socSecNum"
              matInput
              #socSecNumError="ngModel"
              (change)="log(socSecNum)"
              pattern="[0-9]{9}"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="socSecNumError.invalid && socSecNumError.touched"
            >
              <div *ngIf="socSecNumError.errors.required">
                TAJ kártya szám megadása kötelező!
              </div>
              <div *ngIf="socSecNumError.errors.pattern">
                Meg kell felelnie a mintának.
              </div>
            </div>
            <mat-hint align="start">TAJ kártya szám megadása kötelező. (Ne használjon szóközöket és kötőjeleket.)</mat-hint>
          </mat-form-field>

          <mat-card-actions>
            <button color="primary" mat-raised-button [disabled]="!f.valid">
              <i class="fas fa-sign-in-alt"></i> Regisztráció
            </button>
          </mat-card-actions>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
