<app-main-nav></app-main-nav>
<div class="text-center" *ngIf="isLogged; else loggedOut">
  <h2>You've already logged in</h2>
</div>

<ng-template #loggedOut>
  <div class="container d-flex justify-content-center">
    <mat-card class="example-card">
      <mat-card-header>
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link" routerLink="/login">Bejelentkezés</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" routerLink="/registration">Regisztráció</a>
          </li>
        </ul>
      </mat-card-header>
      <mat-card-content>
        <form #f="ngForm" (ngSubmit)="onRegister()" novalidate>
          <mat-form-field color="accent" appearance="fill">
            <mat-label>Felhasználónév</mat-label>
            <input
              ngModel
              name="username"
              id="username"
              matInput
              #username="ngModel"
              (change)="log(username)"
              minlength="5"
              maxlength="15"
              pattern="[A-Za-z0-9]+"
              required
            />
            <mat-hint align="start">Minimum 5, maximum 15 karakter.</mat-hint>
            <div
              class="alert alert-danger"
              *ngIf="username.invalid && username.touched"
            >
              <div *ngIf="username.errors.required">
                Felhasználónév megadása kötelező!
              </div>
              <div *ngIf="username.errors.minlength">
                Minimum {{ username.errors.minlength.requiredLength }} karakter hosszúságú legyen!
              </div>
              <div *ngIf="username.errors.pattern">
                Csak kis- és nagybetűket, illetve számokat tartalmazhat!
              </div>
            </div>
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Jelszó</mat-label>
            <input
              ngModel
              type="password"
              name="password"
              id="password"
              matInput
              #password="ngModel"
              (change)="log(password)"
              minlength="8"
              maxlength="30"
              pattern="'^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,}$'"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="password.invalid && password.touched"
            >
              <div *ngIf="password.errors.required">
                Jelszó megadása kötelező!
              </div>
              <div *ngIf="password.errors.minlength">
                Minimum {{ password.errors.minlength.requiredLength }} karakter hosszúságú legyen!
              </div>
            </div>
            <mat-hint align="start"
              >Minimum 8, maximum 30 karakter hosszú, tartalmazzon számokat kis
              és nagybetűket.</mat-hint
            >
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Teljes név</mat-label>
            <input name="name" id="name" matInput [(ngModel)]="name" required />
            <mat-hint align="start">Név megadása kötelező</mat-hint>
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Email</mat-label>
            <input
              ngModel
              name="email"
              id="email"
              matInput
              #email="ngModel"
              (change)="log(email)"
              pattern="[a-z0-9_.+-]+@[a-z0-9-]+\.[a-z0-9-]+"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="email.invalid && email.touched"
            >
              <div *ngIf="email.errors.required">
                Jelszó megadása kötelező!
              </div>
              <div *ngIf="email.errors.pattern">
                Meg kell felelnie a mintának.
              </div>
            </div>
            <mat-hint align="start">Email cím megadása kötelező</mat-hint>
          </mat-form-field>

          <mat-form-field>
            <label for="dateOfBorn">Születési dátum:</label>
            <input
              name="dateOfBorn"
              id="dateOfBorn"
              matInput
              [matDatepicker]="myDatePicker"
              [(ngModel)]="dateOfBorn"
              [min]="minDate"
              [max]="maxDate"
              required
            />
            <mat-datepicker-toggle
              [for]="myDatePicker"
              matSuffix
            ></mat-datepicker-toggle>
            <mat-datepicker #myDatePicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline" style="margin-bottom: 0px">
            <mat-label>Lakcím</mat-label>
            <input name="address" id="address" matInput [(ngModel)]="address" />
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>Személyazonosító igazolvány szám</mat-label>
            <input
            ngModel
              name="idCard"
              id="idCard"
              matInput
              #idCard="ngModel"
              (change)="log(idCard)"
              pattern="[0-9]{6}[A-Z]{2}"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="idCard.invalid && idCard.touched"
            >
              <div *ngIf="idCard.errors.required">
                Személyazonosító igazolvány szám megadása kötelező!
              </div>
              <div *ngIf="idCard.errors.pattern">
                Meg kell felelnie a mintának.
              </div>
            </div>
            <mat-hint align="start"
              >Személyazonosító igazolvány szám megadása kötelező</mat-hint
            >
          </mat-form-field>

          <mat-form-field color="accent" appearance="fill">
            <mat-label>TAJ kártya szám</mat-label>
            <input
              ngModel
              name="socSecNum"
              id="socSecNum"
              matInput
              #socSecNum="ngModel"
              (change)="log(socSecNum)"
              pattern="[0-9]{9}"
              required
            />
            <div
              class="alert alert-danger"
              *ngIf="socSecNum.invalid && socSecNum.touched"
            >
              <div *ngIf="socSecNum.errors.required">
                TAJ kártya szám megadása kötelező!
              </div>
              <div *ngIf="socSecNum.errors.pattern">
                Meg kell felelnie a mintának.
              </div>
            </div>
            <mat-hint align="start">TAJ kártya szám megadása kötelező. (Ne használjon szóközöket és kötőjeleket.)</mat-hint>
          </mat-form-field>

          <mat-card-actions>
            <button color="primary" mat-raised-button [disabled]="!f.valid">
              <i class="fas fa-sign-in-alt"></i> Regisztráció
            </button>
          </mat-card-actions>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</ng-template>
